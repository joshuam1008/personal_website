---
import type { ImageMetadata } from 'astro';
import BaseHead from '@components/BaseHead.astro';
import Footer from '@components/Footer.astro';
import Header from '@components/Header.astro';
import AnimationSettings from '@components/AnimationSettings';
import { SITE_DESCRIPTION, SITE_TITLE } from '../consts';

interface Props {
  title?: string;
  description?: string;
  image?: ImageMetadata;
}

const { title = SITE_TITLE, description = SITE_DESCRIPTION, image } = Astro.props as Props;
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={title} description={description} image={image} />
    {import.meta.env.PUBLIC_PLAUSIBLE_DOMAIN && (
      <script
        is:inline
        defer
        data-domain={import.meta.env.PUBLIC_PLAUSIBLE_DOMAIN}
        src="https://plausible.io/js/script.js"
      ></script>
    )}
  </head>
  <body class="min-h-screen bg-[#0b1120] text-neutral-100">
    <div class="relative">
      <div class="pointer-events-none fixed inset-0 -z-10 bg-[radial-gradient(circle_at_top,_rgba(99,102,241,0.12),_transparent_55%),radial-gradient(circle_at_bottom,_rgba(236,72,153,0.12),_transparent_55%)]" />
      <div class="relative flex min-h-screen flex-col">
        <Header />
        <main class="flex-1 pb-24">
          <slot />
        </main>
        <Footer />
      </div>
    </div>
    <AnimationSettings client:load />
    <script>
      import { initReveal } from '@lib/reveal';
      import { initShimmers } from '@lib/shimmer';
      import { initParallax } from '@lib/parallax';
      import { initCursorTrail } from '@lib/cursor-trail';
      import { initMatrixRain } from '@lib/matrix-rain';
      initReveal();
      initShimmers();
      initParallax();
      initCursorTrail();
      initMatrixRain();
    </script>
    <noscript>
      <style>
        [data-reveal]{opacity:1 !important; transform:none !important}
      </style>
    </noscript>
  </body>
</html>
