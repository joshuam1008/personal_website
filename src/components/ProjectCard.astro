---
import { Image } from 'astro:assets';
import type { CollectionEntry } from 'astro:content';
import ExternalLink from './ExternalLink.astro';
import FormattedDate from './FormattedDate.astro';
import TiltCard from './TiltCard';

interface Props {
  project: CollectionEntry<'projects'>;
}

const { project } = Astro.props as Props;
const { data } = project;
const hero = data.heroImage;
---

<TiltCard client:load className={`glass-card flex flex-col overflow-hidden ${data.featured ? 'md:flex-row' : ''}`}>
  {hero && (
    <div class:list={['relative aspect-[4/3] overflow-hidden border-b border-white/10 md:border-b-0', { 'md:w-1/2': data.featured }]}>
      <Image
        src={hero}
        alt={data.heroImageAlt || `${data.title} preview`}
        class="h-full w-full object-cover object-center transition duration-700 hover:scale-105"
        loading="lazy"
      />
      <span class="absolute left-4 top-4 rounded-full bg-black/40 px-3 py-1 text-xs tracking-wide text-white">
        <FormattedDate date={data.launchedAt} />
      </span>
    </div>
  )}
  <div class:list={['flex flex-1 flex-col gap-6 p-8 md:p-10', { 'md:w-1/2': data.featured }] }>
    <div class="space-y-3">
      <div class="flex flex-wrap items-center gap-2">
        {data.tags.map((tag) => (
          <span class="badge" data-tag={tag}>{tag}</span>
        ))}
      </div>
      <h3 class="text-2xl font-semibold text-white md:text-3xl">{data.title}</h3>
      <p class="text-base text-neutral-300">{data.summary}</p>
    </div>
    <div class="flex flex-col gap-3 text-sm text-neutral-300">
      <div class="flex gap-2 text-xs uppercase tracking-[0.25em] text-neutral-500">
        <span>Launched</span>
        <span>â€¢</span>
        <FormattedDate date={data.launchedAt} class="tracking-normal" />
      </div>
      <ul class="flex flex-wrap gap-3">
        {data.links.map((link) => (
          <li>
            <ExternalLink
              href={link.href}
              class="inline-flex items-center gap-2 rounded-full border border-white/15 px-4 py-2 text-sm font-medium text-neutral-100 transition hover:border-white/40 hover:text-white"
            >
              {link.label}
            </ExternalLink>
          </li>
        ))}
      </ul>
    </div>
  </div>
</TiltCard>
