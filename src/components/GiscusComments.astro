---
const repo = import.meta.env.PUBLIC_GISCUS_REPO;
const repoId = import.meta.env.PUBLIC_GISCUS_REPO_ID;
const category = import.meta.env.PUBLIC_GISCUS_CATEGORY;
const categoryId = import.meta.env.PUBLIC_GISCUS_CATEGORY_ID;
const enabled = repo && repoId && category && categoryId;
---

{enabled && (
  <section class="mt-16" data-reveal>
    <h2 class="text-lg font-semibold text-white">Join the discussion</h2>
    <p class="mb-4 text-sm text-neutral-400">
      Comments are powered by GitHub Discussions through Giscus. Log in with GitHub to contribute.
    </p>
    <script is:inline
      src="https://giscus.app/client.js"
      data-repo={repo}
      data-repo-id={repoId}
      data-category={category}
      data-category-id={categoryId}
      data-mapping="pathname"
      data-reactions-enabled="1"
      data-theme="transparent_dark"
      data-lang="en"
      crossorigin="anonymous"
      async
    ></script>
  </section>
)}
